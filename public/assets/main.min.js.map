{"version":3,"sources":["bundle.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","_interopRequireDefault","obj","__esModule","default","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","_rangeGen","_rangeGen2","_randomNum","_randomNum2","appState","isAiPlaying","soundSequence","userSequence","gameSpeed","round","$board","$","generateRandomSequence","map","console","log","highlight","soundId","find","addClass","setTimeout","removeClass","playSound","trigger","setGameSpeed","state","len","speed","playSequence","forEach","index","start","x","concat","tmp","test","slice","join","reset","on","event","num","attr","push","./randomNum","./rangeGen",2,"random","min","max","Math","floor","defineProperty","value",3,"range","end","list"],"mappings":"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","file":"main.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _rangeGen = require('./rangeGen');\n\nvar _rangeGen2 = _interopRequireDefault(_rangeGen);\n\nvar _randomNum = require('./randomNum');\n\nvar _randomNum2 = _interopRequireDefault(_randomNum);\n\n(function () {\n    var appState = {\n        isAiPlaying: false, // Whether the \"AI\" is playing the sequence\n        soundSequence: [], // The list of sound IDs to play in order\n        userSequence: [], // The list of sound IDs the user has triggered\n        gameSpeed: 1500, // the tempo of setInterval\n        round: 1 //  round or how many sounds to play\n    };\n    var $board = $('#game-board');\n\n    var generateRandomSequence = function generateRandomSequence() {\n        return (0, _rangeGen2['default'])(1, 20).map(function () {\n            return (0, _randomNum2['default'])(1, 4);\n        });\n    };\n    console.log(generateRandomSequence());\n\n    /*** Reducers ***/\n\n    var generateSequence = function generateSequence(state) {\n        return _extends({}, state, { soundSequence: generateRandomSequence() });\n    };\n    var startAiPlaying = function startAiPlaying(state) {\n        return _extends({}, state, { isAiPlaying: true });\n    };\n    var stopAiPlaying = function stopAiPlaying(state) {\n        return _extends({}, state, { isAiPlaying: false });\n    };\n\n    /*** Side effects ***/\n\n    var highlight = function highlight(soundId) {\n        $board.find('#btn' + soundId).addClass('active');\n        setTimeout(function () {\n            $board.find('#btn' + soundId).removeClass('active');\n        }, 400);\n    };\n\n    var playSound = function playSound(soundId) {\n        console.log('playing ' + soundId);\n        //$(`[data-sound-id=\"${soundId}\"]`).trigger('play');\n        highlight(soundId);\n        $board.find('#audio' + soundId).trigger('play');\n    };\n\n    var setGameSpeed = function setGameSpeed(state) {\n        var len = state.soundSequence.length;\n        var speed = 1300;\n        if (len >= 5) {\n            speed = 1000;\n        }\n        if (len >= 9) {\n            speed = 750;\n        }\n        if (len >= 13) {\n            speed = 500;\n        }\n        return _extends({}, state, { gameSpeed: speed });\n    };\n\n    var playSequence = function playSequence(state) {\n        state = setGameSpeed(state);\n        console.log(state.gameSpeed);\n        state.soundSequence.forEach(function (soundId, index) {\n            if (index < state.round) {\n                setTimeout(function () {\n                    return playSound(soundId);\n                }, state.gameSpeed * index);\n            }\n        });\n    };\n\n    var start = function start(state) {\n\n        var x = state.soundSequence.concat([(0, _randomNum2['default'])(1, 4)]);\n        console.log(x);\n        var tmp = _extends({}, state, { soundSequence: x });\n        // let tmp = appState.round === 1 ? generateSequence(appState) : state;\n        playSequence(tmp);\n        return tmp;\n    };\n\n    var test = function test(state) {\n        console.log('sound ' + state.soundSequence);\n        console.log('user ' + state.userSequence);\n        if (state.soundSequence.slice(0, state.userSequence.length).join('') != state.userSequence.join('')) {\n            console.log('here1');\n            appState = reset(state); // reset the state on fail\n            return false;\n        } else if (state.soundSequence.length === state.userSequence.length) {\n            console.log('here2');\n            state.round += 1;\n            state.userSequence = [];\n            setTimeout(function () {\n                appState = start(state);\n            }, 1000);\n\n            return true;\n        }\n    };\n\n    var reset = function reset(state) {\n        return _extends({}, state, {\n            soundSequence: [],\n            userSequence: [],\n            round: 1\n        });\n    };\n\n    // const listen = () => {\n    // let tmp;\n    //     $board.on('mouseup', '.square', function(event) {\n    //         // let x = state.userSequence.concat([($(event.target).attr('id').slice(-1))]);\n    //         // tmp = {...state, userSequence: x};\n    //         appState.userSequence.push(($(event.target).attr('id').slice(-1)));\n    //         test(appState);\n\n    //     });\n    // };\n\n    $board.find('#start').on('click', function () {\n        appState = start(appState);\n        // listen();\n    });\n    $board.find('#restart').on('click', function () {\n        appState = reset(appState);\n    });\n    // listen();\n    $board.on('click', '.square', function (event) {\n        // let x = state.userSequence.concat([($(event.target).attr('id').slice(-1))]);\n        // tmp = {...state, userSequence: x};\n        var num = $(event.target).attr('id').slice(-1);\n        playSound(num);\n        appState.userSequence.push(num);\n        test(appState);\n    });\n\n    // appState = generateSequence(appState);\n    // playSequence(appState.soundSequence);\n\n    // export {range, random, generateRandomSequence};\n})();\n\n},{\"./randomNum\":2,\"./rangeGen\":3}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports[\"default\"] = random;\n\nfunction random(min, max) {\n\n    return Math.max(min, Math.floor(Math.random() * (max + 1)));\n}\n\nmodule.exports = exports[\"default\"];\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports[\"default\"] = range;\n\nfunction range(start, end) {\n    var list = [];\n    for (var i = start; i < end + 1; i++) {\n        list.push(i);\n    }\n\n    return list;\n}\n\nmodule.exports = exports[\"default\"];\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvaG9tZS9uYXRhYy9Eb2N1bWVudHMvSmF2YVNjcmlwdC9aaXBsaW5lcy9TaW1vbkdhbWUvc3JjL2pzL21haW4uanMiLCIvaG9tZS9uYXRhYy9Eb2N1bWVudHMvSmF2YVNjcmlwdC9aaXBsaW5lcy9TaW1vbkdhbWUvc3JjL2pzL3JhbmRvbU51bS5qcyIsIi9ob21lL25hdGFjL0RvY3VtZW50cy9KYXZhU2NyaXB0L1ppcGxpbmVzL1NpbW9uR2FtZS9zcmMvanMvcmFuZ2VHZW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7d0JDQW1CLFlBQVk7Ozs7eUJBQ1osYUFBYTs7OztBQUVoQyxDQUFDLFlBQVc7QUFDUixRQUFJLFFBQVEsR0FBRztBQUNYLG1CQUFXLEVBQUUsS0FBSztBQUNsQixxQkFBYSxFQUFFLEVBQUU7QUFDakIsb0JBQVksRUFBRSxFQUFFO0FBQ2hCLGlCQUFTLEVBQUUsSUFBSTtBQUNmLGFBQUssRUFBRSxDQUFDO0tBQ1gsQ0FBQztBQUNGLFFBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQzs7QUFHOUIsUUFBTSxzQkFBc0IsR0FBRyxTQUF6QixzQkFBc0I7ZUFBUywyQkFBTSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDO21CQUFNLDRCQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7U0FBQSxDQUFDO0tBQUEsQ0FBQztBQUMxRSxXQUFPLENBQUMsR0FBRyxDQUFDLHNCQUFzQixFQUFFLENBQUMsQ0FBQzs7OztBQUl0QyxRQUFNLGdCQUFnQixHQUFHLFNBQW5CLGdCQUFnQixDQUFJLEtBQUs7NEJBQVUsS0FBSyxJQUFFLGFBQWEsRUFBRSxzQkFBc0IsRUFBRTtLQUFFLENBQUM7QUFDMUYsUUFBTSxjQUFjLEdBQUcsU0FBakIsY0FBYyxDQUFJLEtBQUs7NEJBQVUsS0FBSyxJ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QUssQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUM5QixDQUFDLENBQUM7O0FBRUgsVUFBTSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVMsS0FBSyxFQUFFOzs7QUFHdEMsWUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0MsaUJBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNmLGdCQUFRLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoQyxZQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7S0FFbEIsQ0FBQyxDQUFDOzs7Ozs7Q0FPVixDQUFBLEVBQUcsQ0FBQzs7Ozs7Ozs7cUJDMUltQixNQUFNOztBQUFmLFNBQVMsTUFBTSxDQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUU7O0FBRXRDLFdBQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQSxBQUFDLENBQUMsQ0FBQyxDQUFDO0NBRS9EOzs7Ozs7Ozs7O3FCQ0p1QixLQUFLOztBQUFkLFNBQVMsS0FBSyxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUU7QUFDdEMsUUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQ1YsU0FBSyxJQUFJLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDbEMsWUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNoQjs7QUFFRCxXQUFPLElBQUksQ0FBQztDQUNuQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgcmFuZ2UgIGZyb20gJy4vcmFuZ2VHZW4nO1xuaW1wb3J0IHJhbmRvbSBmcm9tICcuL3JhbmRvbU51bSc7XG5cbihmdW5jdGlvbigpIHtcbiAgICBsZXQgYXBwU3RhdGUgPSB7XG4gICAgICAgIGlzQWlQbGF5aW5nOiBmYWxzZSwgLy8gV2hldGhlciB0aGUgXCJBSVwiIGlzIHBsYXlpbmcgdGhlIHNlcXVlbmNlXG4gICAgICAgIHNvdW5kU2VxdWVuY2U6IFtdLCAvLyBUaGUgbGlzdCBvZiBzb3VuZCBJRHMgdG8gcGxheSBpbiBvcmRlclxuICAgICAgICB1c2VyU2VxdWVuY2U6IFtdLCAvLyBUaGUgbGlzdCBvZiBzb3VuZCBJRHMgdGhlIHVzZXIgaGFzIHRyaWdnZXJlZFxuICAgICAgICBnYW1lU3BlZWQ6IDE1MDAsICAvLyB0aGUgdGVtcG8gb2Ygc2V0SW50ZXJ2YWxcbiAgICAgICAgcm91bmQ6IDEgLy8gIHJvdW5kIG9yIGhvdyBtYW55IHNvdW5kcyB0byBwbGF5XG4gICAgfTtcbiAgICBsZXQgJGJvYXJkID0gJCgnI2dhbWUtYm9hcmQnKTtcblxuXG4gICAgY29uc3QgZ2VuZXJhdGVSYW5kb21TZXF1ZW5jZSA9ICgpID0+IHJhbmdlKDEsIDIwKS5tYXAoKCkgPT4gcmFuZG9tKDEsIDQpKTtcbiAgICBjb25zb2xlLmxvZyhnZW5lcmF0ZVJhbmRvbVNlcXVlbmNlKCkpO1xuXG4gICAgLyoqKiBSZWR1Y2VycyAqKiovXG5cbiAgICBjb25zdCBnZW5lcmF0ZVNlcXVlbmNlID0gKHN0YXRlKSA9PiAoey4uLnN0YXRlLCBzb3VuZFNlcXVlbmNlOiBnZW5lcmF0ZVJhbmRvbVNlcXVlbmNlKCl9KTtcbiAgICBjb25zdCBzdGFydEFpUGxheWluZyA9IChzdGF0ZSkgPT4gKHsuLi5zdGF0ZSwgaXNBaVBsYXlpbmc6IHRydWV9KTtcbiAgICBjb25zdCBzdG9wQWlQbGF5aW5nID0gKHN0YXRlKSA9PiAoey4uLnN0YXRlLCBpc0FpUGxheWluZzogZmFsc2V9KTtcblxuICAgIC8qKiogU2lkZSBlZmZlY3RzICoqKi9cblxuICAgIGNvbnN0IGhpZ2hsaWdodCA9IChzb3VuZElkKSA9PiB7XG4gICAgICAgICRib2FyZC5maW5kKGAjYnRuJHtzb3VuZElkfWApLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAkYm9hcmQuZmluZChgI2J0biR7c291bmRJZH1gKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0sIDQwMCk7XG4gICAgfTtcblxuICAgIGNvbnN0IHBsYXlTb3VuZCA9IChzb3VuZElkKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdwbGF5aW5nICcgKyBzb3VuZElkKTtcbiAgICAgICAgLy8kKGBbZGF0YS1zb3VuZC1pZD1cIiR7c291bmRJZH1cIl1gKS50cmlnZ2VyKCdwbGF5Jyk7XG4gICAgICAgIGhpZ2hsaWdodChzb3VuZElkKTtcbiAgICAgICAgJGJvYXJkLmZpbmQoYCNhdWRpbyR7c291bmRJZH1gKS50cmlnZ2VyKCdwbGF5Jyk7XG4gICAgfTtcblxuICAgIGNvbnN0IHNldEdhbWVTcGVlZCA9IChzdGF0ZSkgPT4ge1xuICAgICAgICBsZXQgbGVuID0gc3RhdGUuc291bmRTZXF1ZW5jZS5sZW5ndGg7XG4gICAgICAgIGxldCBzcGVlZCA9IDEzMDA7XG4gICAgICAgIGlmIChsZW4gPj0gNSkge1xuICAgICAgICAgICAgc3BlZWQgPSAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZW4gPj0gOSkge1xuICAgICAgICAgICAgc3BlZWQgPSA3NTA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbiA+PSAxMykge1xuICAgICAgICAgICAgc3BlZWQgPSA1MDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsuLi5zdGF0ZSwgZ2FtZVNwZWVkOiBzcGVlZH07XG4gICAgfTtcblxuICAgIGNvbnN0IHBsYXlTZXF1ZW5jZSA9IChzdGF0ZSkgPT4ge1xuICAgICAgICBzdGF0ZSA9IHNldEdhbWVTcGVlZChzdGF0ZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHN0YXRlLmdhbWVTcGVlZCk7XG4gICAgICAgIHN0YXRlLnNvdW5kU2VxdWVuY2UuZm9yRWFjaCgoc291bmRJZCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmKGluZGV4IDwgc3RhdGUucm91bmQpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHBsYXlTb3VuZChzb3VuZElkKSwgKHN0YXRlLmdhbWVTcGVlZCAqIGluZGV4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBzdGFydCA9IChzdGF0ZSkgPT4ge1xuXG4gICAgICAgIGxldCB4ID0gc3RhdGUuc291bmRTZXF1ZW5jZS5jb25jYXQoW3JhbmRvbSgxLCA0KV0pO1xuICAgICAgICBjb25zb2xlLmxvZyh4KTtcbiAgICAgICAgbGV0IHRtcCA9ICh7Li4uc3RhdGUsIHNvdW5kU2VxdWVuY2U6IHh9KTtcbiAgICAgICAgLy8gbGV0IHRtcCA9IGFwcFN0YXRlLnJvdW5kID09PSAxID8gZ2VuZXJhdGVTZXF1ZW5jZShhcHBTdGF0ZSkgOiBzdGF0ZTtcbiAgICAgICAgcGxheVNlcXVlbmNlKHRtcCk7XG4gICAgICAgIHJldHVybiB0bXA7XG5cbiAgICB9O1xuXG4gICAgY29uc3QgdGVzdCA9IChzdGF0ZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnc291bmQgJyArIHN0YXRlLnNvdW5kU2VxdWVuY2UpO1xuICAgICAgICBjb25zb2xlLmxvZygndXNlciAnICtzdGF0ZS51c2VyU2VxdWVuY2UpO1xuICAgICAgICBpZiAoc3RhdGUuc291bmRTZXF1ZW5jZS5zbGljZSgwLCBzdGF0ZS51c2VyU2VxdWVuY2UubGVuZ3RoKS5qb2luKCcnKSAhPSBzdGF0ZS51c2VyU2VxdWVuY2Uuam9pbignJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoZXJlMScpO1xuICAgICAgICAgICAgYXBwU3RhdGUgPSByZXNldChzdGF0ZSk7IC8vIHJlc2V0IHRoZSBzdGF0ZSBvbiBmYWlsXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoIHN0YXRlLnNvdW5kU2VxdWVuY2UubGVuZ3RoID09PSBzdGF0ZS51c2VyU2VxdWVuY2UubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaGVyZTInKTtcbiAgICAgICAgICAgIHN0YXRlLnJvdW5kICs9IDE7XG4gICAgICAgICAgICBzdGF0ZS51c2VyU2VxdWVuY2UgPSBbXTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFwcFN0YXRlID0gc3RhcnQoc3RhdGUpO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHJlc2V0ID0gKHN0YXRlKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgIHNvdW5kU2VxdWVuY2U6IFtdLFxuICAgICAgICAgICAgdXNlclNlcXVlbmNlOiBbXSxcbiAgICAgICAgICAgIHJvdW5kOiAxXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8vIGNvbnN0IGxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgLy8gbGV0IHRtcDtcbiAgICAvLyAgICAgJGJvYXJkLm9uKCdtb3VzZXVwJywgJy5zcXVhcmUnLCBmdW5jdGlvbihldmVudCkge1xuICAgIC8vICAgICAgICAgLy8gbGV0IHggPSBzdGF0ZS51c2VyU2VxdWVuY2UuY29uY2F0KFsoJChldmVudC50YXJnZXQpLmF0dHIoJ2lkJykuc2xpY2UoLTEpKV0pO1xuICAgIC8vICAgICAgICAgLy8gdG1wID0gey4uLnN0YXRlLCB1c2VyU2VxdWVuY2U6IHh9O1xuICAgIC8vICAgICAgICAgYXBwU3RhdGUudXNlclNlcXVlbmNlLnB1c2goKCQoZXZlbnQudGFyZ2V0KS5hdHRyKCdpZCcpLnNsaWNlKC0xKSkpO1xuICAgIC8vICAgICAgICAgdGVzdChhcHBTdGF0ZSk7XG5cbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfTtcblxuICAgICRib2FyZC5maW5kKCcjc3RhcnQnKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGFwcFN0YXRlID0gc3RhcnQoYXBwU3RhdGUpO1xuICAgICAgICAvLyBsaXN0ZW4oKTtcblxuICAgIH0pO1xuICAgICRib2FyZC5maW5kKCcjcmVzdGFydCcpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgYXBwU3RhdGUgPSByZXNldChhcHBTdGF0ZSk7XG4gICAgfSk7XG4gICAgLy8gbGlzdGVuKCk7XG4gICAgJGJvYXJkLm9uKCdjbGljaycsICcuc3F1YXJlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIC8vIGxldCB4ID0gc3RhdGUudXNlclNlcXVlbmNlLmNvbmNhdChbKCQoZXZlbnQudGFyZ2V0KS5hdHRyKCdpZCcpLnNsaWNlKC0xKSldKTtcbiAgICAgICAgICAgIC8vIHRtcCA9IHsuLi5zdGF0ZSwgdXNlclNlcXVlbmNlOiB4fTtcbiAgICAgICAgICAgIGxldCBudW0gPSAkKGV2ZW50LnRhcmdldCkuYXR0cignaWQnKS5zbGljZSgtMSk7XG4gICAgICAgICAgICBwbGF5U291bmQobnVtKTtcbiAgICAgICAgICAgIGFwcFN0YXRlLnVzZXJTZXF1ZW5jZS5wdXNoKG51bSk7XG4gICAgICAgICAgICB0ZXN0KGFwcFN0YXRlKTtcblxuICAgICAgICB9KTtcblxuICAgIC8vIGFwcFN0YXRlID0gZ2VuZXJhdGVTZXF1ZW5jZShhcHBTdGF0ZSk7XG4gICAgLy8gcGxheVNlcXVlbmNlKGFwcFN0YXRlLnNvdW5kU2VxdWVuY2UpO1xuXG5cbiAgICAvLyBleHBvcnQge3JhbmdlLCByYW5kb20sIGdlbmVyYXRlUmFuZG9tU2VxdWVuY2V9O1xufSkoKTtcblxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmFuZG9tIChtaW4sIG1heCkge1xuXG4gICAgcmV0dXJuIE1hdGgubWF4KG1pbiwgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCArIDEpKSk7XG5cbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByYW5nZShzdGFydCwgZW5kKSB7XG4gICAgbGV0IGxpc3QgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kICsgMTsgaSsrKSB7XG4gICAgICAgICAgICBsaXN0LnB1c2goaSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbGlzdDtcbn0iXX0=\n"],"sourceRoot":"/source/"}