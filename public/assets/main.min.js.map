{"version":3,"sources":["bundle.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","setGameSpeed","state","len","soundSequence","speed","_extends","gameSpeed","Object","defineProperty","value","assign","target","arguments","source","key","prototype","hasOwnProperty",2,"highlight","soundId","wrapper","find","addClass","setTimeout","removeClass",3,"_interopRequireDefault","obj","__esModule","default","_rangeGen","_randomNum","_randomNum2","_gameSpeed","_playSequence","_playSequence2","_playSound","_playSound2","_highlight","appState","isAiPlaying","userSequence","round","$board","$","start","x","concat","console","log","tmp","test","slice","join","reset","on","event","num","attr","push","./gameSpeed","./highlight","./playSequence","./playSound","./randomNum","./rangeGen",4,"playSequence","_gameSpeed2","forEach","index",5,"playSound","_highlight2","trigger",6,"random","min","max","Math","floor",7,"range","end","list"],"mappings":"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","file":"main.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/**\n * Given the state of the game will determine the length of the soundSequence to\n * set the corresponding speed in milliseconds which is passed to the\n * setTimeout() when playing the sequence to repeat.\n * @param {object} state contains all the state information about the game.\n * @return {object} new state object with the gameSpeed property set along with\n * rest of the original state object.\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports[\"default\"] = setGameSpeed;\n\nfunction setGameSpeed(state) {\n    var len = state.soundSequence.length;\n    var speed = 1300;\n    if (len >= 5) {\n        speed = 1000;\n    }\n    if (len >= 9) {\n        speed = 750;\n    }\n    if (len >= 13) {\n        speed = 500;\n    }\n    return _extends({}, state, { gameSpeed: speed });\n}\n\n;\nmodule.exports = exports[\"default\"];\n\n},{}],2:[function(require,module,exports){\n/**\n * given the soundId and a wrapper element will find the panel with an id = btn\n * and the soundId number\n * @param  {string} soundId string version of the number from the attribute look\n *                          up when a panel is clicked of triggered to click\n * @param  {jQuery element} wrapper around the panel elements and audio elements\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports['default'] = highlight;\n\nfunction highlight(soundId, wrapper) {\n    wrapper.find('#btn' + soundId).addClass('active');\n    setTimeout(function () {\n        wrapper.find('#btn' + soundId).removeClass('active');\n    }, 400);\n}\n\nmodule.exports = exports['default'];\n\n},{}],3:[function(require,module,exports){\n/*** Sequence ***/\n'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _rangeGen = require('./rangeGen');\n\nvar _rangeGen2 = _interopRequireDefault(_rangeGen);\n\nvar _randomNum = require('./randomNum');\n\nvar _randomNum2 = _interopRequireDefault(_randomNum);\n\n/*** State setup ***/\n\nvar _gameSpeed = require('./gameSpeed');\n\nvar _gameSpeed2 = _interopRequireDefault(_gameSpeed);\n\n/*** Actions ***/\n\nvar _playSequence = require('./playSequence');\n\nvar _playSequence2 = _interopRequireDefault(_playSequence);\n\nvar _playSound = require('./playSound');\n\nvar _playSound2 = _interopRequireDefault(_playSound);\n\nvar _highlight = require('./highlight');\n\nvar _highlight2 = _interopRequireDefault(_highlight);\n\n(function () {\n    var appState = {\n        isAiPlaying: false, // Whether the \"AI\" is playing the sequence\n        soundSequence: [], // The list of sound IDs to play in order\n        userSequence: [], // The list of sound IDs the user has triggered\n        gameSpeed: 1500, // the tempo of setInterval\n        round: 1 //  round or how many sounds to play\n    };\n    var $board = $('#game-board');\n\n    var generateRandomSequence = function generateRandomSequence() {\n        return (0, _rangeGen2['default'])(1, 20).map(function () {\n            return (0, _randomNum2['default'])(1, 4);\n        });\n    };\n\n    /*** Reducers ***/\n\n    var generateSequence = function generateSequence(state) {\n        return _extends({}, state, { soundSequence: generateRandomSequence() });\n    };\n    var startAiPlaying = function startAiPlaying(state) {\n        return _extends({}, state, { isAiPlaying: true });\n    };\n    var stopAiPlaying = function stopAiPlaying(state) {\n        return _extends({}, state, { isAiPlaying: false });\n    };\n\n    var start = function start(state) {\n\n        var x = state.soundSequence.concat([(0, _randomNum2['default'])(1, 4)]);\n        console.log(x);\n        var tmp = _extends({}, state, { soundSequence: x });\n        // let tmp = appState.round === 1 ? generateSequence(appState) : state;\n        (0, _playSequence2['default'])(tmp, $board);\n        return tmp;\n    };\n\n    var test = function test(state) {\n        console.log('sound ' + state.soundSequence);\n        console.log('user ' + state.userSequence);\n        if (state.soundSequence.slice(0, state.userSequence.length).join('') != state.userSequence.join('')) {\n            console.log('here1');\n            appState = reset(state); // reset the state on fail\n            return false;\n        } else if (state.soundSequence.length === state.userSequence.length) {\n            console.log('here2');\n            state.round += 1;\n            state.userSequence = [];\n            setTimeout(function () {\n                appState = start(state);\n            }, 1000);\n\n            return true;\n        }\n    };\n\n    var reset = function reset(state) {\n        return _extends({}, state, {\n            soundSequence: [],\n            userSequence: [],\n            round: 1\n        });\n    };\n\n    // const listen = () => {\n    // let tmp;\n    //     $board.on('mouseup', '.square', function(event) {\n    //         // let x = state.userSequence.concat([($(event.target).attr('id').slice(-1))]);\n    //         // tmp = {...state, userSequence: x};\n    //         appState.userSequence.push(($(event.target).attr('id').slice(-1)));\n    //         test(appState);\n\n    //     });\n    // };\n\n    $board.find('#start').on('click', function () {\n        appState = start(appState);\n        // listen();\n    });\n    $board.find('#restart').on('click', function () {\n        appState = reset(appState);\n    });\n    // listen();\n    $board.on('click', '.square', function (event) {\n        // let x = state.userSequence.concat([($(event.target).attr('id').slice(-1))]);\n        // tmp = {...state, userSequence: x};\n        var num = $(event.target).attr('id').slice(-1);\n        (0, _playSound2['default'])(num, $board);\n        appState.userSequence.push(num);\n        test(appState);\n    });\n\n    // appState = generateSequence(appState);\n    // playSequence(appState.soundSequence);\n\n    // export {range, random, generateRandomSequence};\n})();\n\n},{\"./gameSpeed\":1,\"./highlight\":2,\"./playSequence\":4,\"./playSound\":5,\"./randomNum\":6,\"./rangeGen\":7}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports['default'] = playSequence;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _gameSpeed = require('./gameSpeed');\n\nvar _gameSpeed2 = _interopRequireDefault(_gameSpeed);\n\nvar _playSound = require('./playSound');\n\nvar _playSound2 = _interopRequireDefault(_playSound);\n\n/**\n * Given the state object will first call setGameSpeed then using the forEach()\n * function place a setTimeout() call on the stack base off that speed and the\n * index value from the soundSequence array\n * @param  {object} state info about the game state\n * @param  {jQuery element} this is the wrapper element for the audio files and\n *                          panel buttons to highlight\n */\n\nfunction playSequence(state, wrapper) {\n    state = (0, _gameSpeed2['default'])(state);\n    console.log(state.gameSpeed);\n    state.soundSequence.forEach(function (soundId, index) {\n        if (index < state.round) {\n            setTimeout(function () {\n                return (0, _playSound2['default'])(soundId, wrapper);\n            }, state.gameSpeed * index);\n        }\n    });\n}\n\n;\nmodule.exports = exports['default'];\n\n},{\"./gameSpeed\":1,\"./playSound\":5}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\nexports['default'] = playSound;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _highlight = require('./highlight');\n\nvar _highlight2 = _interopRequireDefault(_highlight);\n\nfunction playSound(soundId, wrapper) {\n    console.log('playing ' + soundId);\n    //$(`[data-sound-id=\"${soundId}\"]`).trigger('play');\n    (0, _highlight2['default'])(soundId, wrapper);\n    wrapper.find('#audio' + soundId).trigger('play');\n}\n\nmodule.exports = exports['default'];\n\n},{\"./highlight\":2}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports[\"default\"] = random;\n\nfunction random(min, max) {\n\n    return Math.max(min, Math.floor(Math.random() * (max + 1)));\n}\n\nmodule.exports = exports[\"default\"];\n\n},{}],7:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports[\"default\"] = range;\n\nfunction range(start, end) {\n    var list = [];\n    for (var i = start; i < end + 1; i++) {\n        list.push(i);\n    }\n\n    return list;\n}\n\nmodule.exports = exports[\"default\"];\n\n},{}]},{},[3])\n//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvaG9tZS9uYXRhYy9Eb2N1bWVudHMvSmF2YVNjcmlwdC9aaXBsaW5lcy9TaW1vbkdhbWUvc3JjL2pzL2dhbWVTcGVlZC5qcyIsIi9ob21lL25hdGFjL0RvY3VtZW50cy9KYXZhU2NyaXB0L1ppcGxpbmVzL1NpbW9uR2FtZS9zcmMvanMvaGlnaGxpZ2h0LmpzIiwiL2hvbWUvbmF0YWMvRG9jdW1lbnRzL0phdmFTY3JpcHQvWmlwbGluZXMvU2ltb25HYW1lL3NyYy9qcy9tYWluLmpzIiwiL2hvbWUvbmF0YWMvRG9jdW1lbnRzL0phdmFTY3JpcHQvWmlwbGluZXMvU2ltb25HYW1lL3NyYy9qcy9wbGF5U2VxdWVuY2UuanMiLCIvaG9tZS9uYXRhYy9Eb2N1bWVudHMvSmF2YVNjcmlwdC9aaXBsaW5lcy9TaW1vbkdhbWUvc3JjL2pzL3BsYXlTb3VuZC5qcyIsIi9ob21lL25hdGFjL0RvY3VtZW50cy9KYXZhU2NyaXB0L1ppcGxpbmVzL1NpbW9uR2FtZS9zcmMvanMvcmFuZG9tTnVtLmpzIiwiL2hvbWUvbmF0YWMvRG9jdW1lbnRzL0phdmFTY3JpcHQvWmlwbGluZXMvU2ltb25HYW1lL3NyYy9qcy9yYW5nZUdlbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7cUJDUXdCLFlBQVk7O0FBQXJCLFNBQVMsWUFBWSxDQUFDLEtBQUssRUFBRTtBQUN4QyxRQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQztBQUNyQyxRQUFJLEtBQUssR0FBRyxJQUFJLENBQUM7QUFDakIsUUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFO0FBQ1YsYUFBSyxHQUFHLElBQUksQ0FBQztLQUNoQjtBQUNELFFBQUksR0FBRyxJQUFJLENBQUMsRUFBRTtBQUNWLGFBQUssR0FBRyxHQUFHLENBQUM7S0FDZjtBQUNELFFBQUksR0FBRyxJQUFJLEVBQUUsRUFBRTtBQUNYLGFBQUssR0FBRyxHQUFHLENBQUM7S0FDZjtBQUNELHdCQUFXLEtBQUssSUFBRSxTQUFTLEVBQUUsS0FBSyxJQUFFO0NBQ3ZDOztBQUFBLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7cUJDZHNCLFNBQVM7O0FBQWxCLFNBQVMsU0FBUyxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUU7QUFDaEQsV0FBTyxDQUFDLElBQUksVUFBUSxPQUFPLENBQUcsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDbEQsY0FBVSxDQUFDLFlBQU07QUFDYixlQUFPLENBQUMsSUFBSSxVQUFRLE9BQU8sQ0FBRyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUN4RCxFQUFFLEdBQUcsQ0FBQyxDQUFDO0NBQ1g7Ozs7Ozs7Ozs7Ozt3QkNYa0IsWUFBWTs7Ozt5QkFDWixhQUFhOzs7Ozs7eUJBR1AsYUFBYTs7Ozs7OzRCQUdiLGdCQUFnQjs7Ozt5QkFDaEIsYUFBYTs7Ozt5QkFDYixhQUFhOzs7O0FBRXRDLENBQUMsWUFBVztBQUNSLFFBQUksUUFBUSxHQUFHO0FBQ1gsbUJBQVcsRUFBRSxLQUFLO0FBQ2xCLHFCQUFhLEVBQUUsRUFBRTtBQUNqQixvQkFBWSxFQUFFLEVBQUU7QUFDaEIsaUJBQVMsRUFBRSxJQUFJO0FBQ2YsYUFBSyxFQUFFLENBQUM7S0FDWCxDQUFDO0FBQ0YsUUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDOztBQUc5QixRQUFNLHNCQUFzQixHQUFHLFNBQXpCLHNCQUFzQjtlQUFTLDJCQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUM7bUJBQU0sNEJBQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUFBLENBQUM7S0FBQSxDQUFDOzs7O0FBSzFFLFFBQU0sZ0JBQWdCLEdBQUcsU0FBbkIsZ0JBQWdCLENBQUksS0FBSzs0QkFBVSxLQUFLLElBQUUsYUFBYSxFQUFFLHNCQUFzQixFQUFFO0tBQUUsQ0FBQztBQUMxRixRQUFNLGNBQWMsR0FBRyxTQUFqQixjQUFjLENBQUksS0FBSzs0QkFBVSxLQUFLLElBQUUsV0FBVyxFQUFFLElBQUk7S0FBRSxDQUFDO0FBQ2xFLFFBQU0sYUFBYSxHQUFHLFNBQWhCLGFBQWEsQ0FBSSxLQUFLOzRCQUFVLEtBQUssSUFBRSxXQUFXLEVBQUUsS0FBSztLQUFFLENBQUM7O0FBR2xFLFFBQU0sS0FBSyxHQUFHLFNBQVIsS0FBSyxDQUFJLEtBQUssRUFBSzs7QUFFckIsWUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyw0QkFBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25ELGVBQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDZixZQUFJLEdBQUcsZ0JBQVEsS0FBSyxJQUFFLGFBQWEsRUFBRSxDQUFDLEdBQUUsQ0FBQzs7QUFFekMsdUNBQWEsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQzFCLGVBQU8sR0FBRyxDQUFDO0tBRWQsQ0FBQzs7QUFFRixRQUFNLElBQUksR0FBRyxTQUFQLElBQUksQ0FBSSxLQUFLLEVBQUs7QUFDcEIsZUFBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQzVDLGVBQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxHQUFFLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUN6QyxZQUFJLEtBQUssQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxLQUFLLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUNqRyxtQkFBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNyQixvQkFBUSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN4QixtQkFBTyxLQUFLLENBQUM7U0FDaEIsTUFBTSxJQUFLLEtBQUssQ0FBQyxhQUFhLENBQUMsTUFBTSxLQUFLLEtBQUssQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFO0FBQ2xFLG1CQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3JCLGlCQUFLLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQztBQUNqQixpQkFBSyxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUM7QUFDeEIsc0JBQVUsQ0FBQyxZQUFNO0FBQ2Isd0JBQVEsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDM0IsRUFBRSxJQUFJLENBQUMsQ0FBQzs7QUFFVCxtQkFBTyxJQUFJLENBQUM7U0FDZjtLQUNKLENBQUM7O0FBRUYsUUFBTSxLQUFLLEdBQUcsU0FBUixLQUFLLENBQUksS0FBSyxFQUFLO0FBQ3JCLDRCQUNPLEtBQUs7QUFDUix5QkFBYSxFQUFFLEVBQUU7QUFDakIsd0JBQVksRUFBRSxFQUFFO0FBQ2hCLGlCQUFLLEVBQUUsQ0FBQztXQUNWO0tBQ0wsQ0FBQzs7Ozs7Ozs7Ozs7OztBQWFGLFVBQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxZQUFNO0FBQ3BDLGdCQUFRLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDOztLQUc5QixDQUFDLENBQUM7QUFDSCxVQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsWUFBTTtBQUN0QyxnQkFBUSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUM5QixDQUFDLENBQUM7O0FBRUgsVUFBTSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVMsS0FBSyxFQUFFOzs7QUFHdEMsWUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0Msb0NBQVUsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3ZCLGdCQUFRLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoQyxZQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7S0FFbEIsQ0FBQyxDQUFDOzs7Ozs7Q0FPVixDQUFBLEVBQUcsQ0FBQzs7Ozs7Ozs7cUJDaEdtQixZQUFZOzs7O3lCQVhYLGFBQWE7Ozs7eUJBQ2IsYUFBYTs7Ozs7Ozs7Ozs7OztBQVV2QixTQUFTLFlBQVksQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFO0FBQ2pELFNBQUssR0FBRyw0QkFBYSxLQUFLLENBQUMsQ0FBQztBQUM1QixXQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM3QixTQUFLLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxVQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUs7QUFDNUMsWUFBRyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssRUFBRTtBQUNwQixzQkFBVSxDQUFDO3VCQUFNLDRCQUFVLE9BQU8sRUFBRSxPQUFPLENBQUM7YUFBQSxFQUFHLEtBQUssQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFFLENBQUM7U0FDNUU7S0FDSixDQUFDLENBQUM7Q0FDTjs7QUFBQSxDQUFDOzs7Ozs7Ozs7cUJDaEJzQixTQUFTOzs7O3lCQUhYLGFBQWE7Ozs7QUFHcEIsU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUNoRCxXQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsQ0FBQzs7QUFFbEMsZ0NBQVUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQzVCLFdBQU8sQ0FBQyxJQUFJLFlBQVUsT0FBTyxDQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0NBQ3BEOzs7Ozs7Ozs7O3FCQ1J1QixNQUFNOztBQUFmLFNBQVMsTUFBTSxDQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUU7O0FBRXRDLFdBQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQSxBQUFDLENBQUMsQ0FBQyxDQUFDO0NBRS9EOzs7Ozs7Ozs7O3FCQ0p1QixLQUFLOztBQUFkLFNBQVMsS0FBSyxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUU7QUFDdEMsUUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQ1YsU0FBSyxJQUFJLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDbEMsWUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUNoQjs7QUFFRCxXQUFPLElBQUksQ0FBQztDQUNuQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKipcbiAqIEdpdmVuIHRoZSBzdGF0ZSBvZiB0aGUgZ2FtZSB3aWxsIGRldGVybWluZSB0aGUgbGVuZ3RoIG9mIHRoZSBzb3VuZFNlcXVlbmNlIHRvXG4gKiBzZXQgdGhlIGNvcnJlc3BvbmRpbmcgc3BlZWQgaW4gbWlsbGlzZWNvbmRzIHdoaWNoIGlzIHBhc3NlZCB0byB0aGVcbiAqIHNldFRpbWVvdXQoKSB3aGVuIHBsYXlpbmcgdGhlIHNlcXVlbmNlIHRvIHJlcGVhdC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBzdGF0ZSBjb250YWlucyBhbGwgdGhlIHN0YXRlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBnYW1lLlxuICogQHJldHVybiB7b2JqZWN0fSBuZXcgc3RhdGUgb2JqZWN0IHdpdGggdGhlIGdhbWVTcGVlZCBwcm9wZXJ0eSBzZXQgYWxvbmcgd2l0aFxuICogcmVzdCBvZiB0aGUgb3JpZ2luYWwgc3RhdGUgb2JqZWN0LlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXRHYW1lU3BlZWQoc3RhdGUpIHtcbiAgICBsZXQgbGVuID0gc3RhdGUuc291bmRTZXF1ZW5jZS5sZW5ndGg7XG4gICAgbGV0IHNwZWVkID0gMTMwMDtcbiAgICBpZiAobGVuID49IDUpIHtcbiAgICAgICAgc3BlZWQgPSAxMDAwO1xuICAgIH1cbiAgICBpZiAobGVuID49IDkpIHtcbiAgICAgICAgc3BlZWQgPSA3NTA7XG4gICAgfVxuICAgIGlmIChsZW4gPj0gMTMpIHtcbiAgICAgICAgc3BlZWQgPSA1MDA7XG4gICAgfVxuICAgIHJldHVybiB7Li4uc3RhdGUsIGdhbWVTcGVlZDogc3BlZWR9O1xufTsiLCIvKipcbiAqIGdpdmVuIHRoZSBzb3VuZElkIGFuZCBhIHdyYXBwZXIgZWxlbWVudCB3aWxsIGZpbmQgdGhlIHBhbmVsIHdpdGggYW4gaWQgPSBidG5cbiAqIGFuZCB0aGUgc291bmRJZCBudW1iZXJcbiAqIEBwYXJhbSAge3N0cmluZ30gc291bmRJZCBzdHJpbmcgdmVyc2lvbiBvZiB0aGUgbnVtYmVyIGZyb20gdGhlIGF0dHJpYnV0ZSBsb29rXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgdXAgd2hlbiBhIHBhbmVsIGlzIGNsaWNrZWQgb2YgdHJpZ2dlcmVkIHRvIGNsaWNrXG4gKiBAcGFyYW0gIHtqUXVlcnkgZWxlbWVudH0gd3JhcHBlciBhcm91bmQgdGhlIHBhbmVsIGVsZW1lbnRzIGFuZCBhdWRpbyBlbGVtZW50c1xuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBoaWdobGlnaHQoc291bmRJZCwgd3JhcHBlcikge1xuICAgIHdyYXBwZXIuZmluZChgI2J0biR7c291bmRJZH1gKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHdyYXBwZXIuZmluZChgI2J0biR7c291bmRJZH1gKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgfSwgNDAwKTtcbn0iLCIgLyoqKiBTZXF1ZW5jZSAqKiovXG5pbXBvcnQgcmFuZ2UgIGZyb20gJy4vcmFuZ2VHZW4nO1xuaW1wb3J0IHJhbmRvbSBmcm9tICcuL3JhbmRvbU51bSc7XG5cbiAvKioqIFN0YXRlIHNldHVwICoqKi9cbmltcG9ydCBzZXRHYW1lU3BlZWQgZnJvbSAnLi9nYW1lU3BlZWQnO1xuXG4gLyoqKiBBY3Rpb25zICoqKi9cbmltcG9ydCBwbGF5U2VxdWVuY2UgZnJvbSAnLi9wbGF5U2VxdWVuY2UnO1xuaW1wb3J0IHBsYXlTb3VuZCAgICBmcm9tICcuL3BsYXlTb3VuZCc7XG5pbXBvcnQgaGlnaGxpZ2h0ICAgIGZyb20gJy4vaGlnaGxpZ2h0JztcblxuKGZ1bmN0aW9uKCkge1xuICAgIGxldCBhcHBTdGF0ZSA9IHtcbiAgICAgICAgaXNBaVBsYXlpbmc6IGZhbHNlLCAvLyBXaGV0aGVyIHRoZSBcIkFJXCIgaXMgcGxheWluZyB0aGUgc2VxdWVuY2VcbiAgICAgICAgc291bmRTZXF1ZW5jZTogW10sIC8vIFRoZSBsaXN0IG9mIHNvdW5kIElEcyB0byBwbGF5IGluIG9yZGVyXG4gICAgICAgIHVzZXJTZXF1ZW5jZTogW10sIC8vIFRoZSBsaXN0IG9mIHNvdW5kIElEcyB0aGUgdXNlciBoYXMgdHJpZ2dlcmVkXG4gICAgICAgIGdhbWVTcGVlZDogMTUwMCwgIC8vIHRoZSB0ZW1wbyBvZiBzZXRJbnRlcnZhbFxuICAgICAgICByb3VuZDogMSAvLyAgcm91bmQgb3IgaG93IG1hbnkgc291bmRzIHRvIHBsYXlcbiAgICB9O1xuICAgIGxldCAkYm9hcmQgPSAkKCcjZ2FtZS1ib2FyZCcpO1xuXG5cbiAgICBjb25zdCBnZW5lcmF0ZVJhbmRvbVNlcXVlbmNlID0gKCkgPT4gcmFuZ2UoMSwgMjApLm1hcCgoKSA9PiByYW5kb20oMSwgNCkpO1xuXG5cbiAgICAvKioqIFJlZHVjZXJzICoqKi9cblxuICAgIGNvbnN0IGdlbmVyYXRlU2VxdWVuY2UgPSAoc3RhdGUpID0+ICh7Li4uc3RhdGUsIHNvdW5kU2VxdWVuY2U6IGdlbmVyYXRlUmFuZG9tU2VxdWVuY2UoKX0pO1xuICAgIGNvbnN0IHN0YXJ0QWlQbGF5aW5nID0gKHN0YXRlKSA9PiAoey4uLnN0YXRlLCBpc0FpUGxheWluZzogdHJ1ZX0pO1xuICAgIGNvbnN0IHN0b3BBaVBsYXlpbmcgPSAoc3RhdGUpID0+ICh7Li4uc3RhdGUsIGlzQWlQbGF5aW5nOiBmYWxzZX0pO1xuXG5cbiAgICBjb25zdCBzdGFydCA9IChzdGF0ZSkgPT4ge1xuXG4gICAgICAgIGxldCB4ID0gc3RhdGUuc291bmRTZXF1ZW5jZS5jb25jYXQoW3JhbmRvbSgxLCA0KV0pO1xuICAgICAgICBjb25zb2xlLmxvZyh4KTtcbiAgICAgICAgbGV0IHRtcCA9ICh7Li4uc3RhdGUsIHNvdW5kU2VxdWVuY2U6IHh9KTtcbiAgICAgICAgLy8gbGV0IHRtcCA9IGFwcFN0YXRlLnJvdW5kID09PSAxID8gZ2VuZXJhdGVTZXF1ZW5jZShhcHBTdGF0ZSkgOiBzdGF0ZTtcbiAgICAgICAgcGxheVNlcXVlbmNlKHRtcCwgJGJvYXJkKTtcbiAgICAgICAgcmV0dXJuIHRtcDtcblxuICAgIH07XG5cbiAgICBjb25zdCB0ZXN0ID0gKHN0YXRlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzb3VuZCAnICsgc3RhdGUuc291bmRTZXF1ZW5jZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd1c2VyICcgK3N0YXRlLnVzZXJTZXF1ZW5jZSk7XG4gICAgICAgIGlmIChzdGF0ZS5zb3VuZFNlcXVlbmNlLnNsaWNlKDAsIHN0YXRlLnVzZXJTZXF1ZW5jZS5sZW5ndGgpLmpvaW4oJycpICE9IHN0YXRlLnVzZXJTZXF1ZW5jZS5qb2luKCcnKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2hlcmUxJyk7XG4gICAgICAgICAgICBhcHBTdGF0ZSA9IHJlc2V0KHN0YXRlKTsgLy8gcmVzZXQgdGhlIHN0YXRlIG9uIGZhaWxcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmICggc3RhdGUuc291bmRTZXF1ZW5jZS5sZW5ndGggPT09IHN0YXRlLnVzZXJTZXF1ZW5jZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoZXJlMicpO1xuICAgICAgICAgICAgc3RhdGUucm91bmQgKz0gMTtcbiAgICAgICAgICAgIHN0YXRlLnVzZXJTZXF1ZW5jZSA9IFtdO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXBwU3RhdGUgPSBzdGFydChzdGF0ZSk7XG4gICAgICAgICAgICB9LCAxMDAwKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgcmVzZXQgPSAoc3RhdGUpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN0YXRlLFxuICAgICAgICAgICAgc291bmRTZXF1ZW5jZTogW10sXG4gICAgICAgICAgICB1c2VyU2VxdWVuY2U6IFtdLFxuICAgICAgICAgICAgcm91bmQ6IDFcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgLy8gY29uc3QgbGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAvLyBsZXQgdG1wO1xuICAgIC8vICAgICAkYm9hcmQub24oJ21vdXNldXAnLCAnLnNxdWFyZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgLy8gICAgICAgICAvLyBsZXQgeCA9IHN0YXRlLnVzZXJTZXF1ZW5jZS5jb25jYXQoWygkKGV2ZW50LnRhcmdldCkuYXR0cignaWQnKS5zbGljZSgtMSkpXSk7XG4gICAgLy8gICAgICAgICAvLyB0bXAgPSB7Li4uc3RhdGUsIHVzZXJTZXF1ZW5jZTogeH07XG4gICAgLy8gICAgICAgICBhcHBTdGF0ZS51c2VyU2VxdWVuY2UucHVzaCgoJChldmVudC50YXJnZXQpLmF0dHIoJ2lkJykuc2xpY2UoLTEpKSk7XG4gICAgLy8gICAgICAgICB0ZXN0KGFwcFN0YXRlKTtcblxuICAgIC8vICAgICB9KTtcbiAgICAvLyB9O1xuXG4gICAgJGJvYXJkLmZpbmQoJyNzdGFydCcpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgYXBwU3RhdGUgPSBzdGFydChhcHBTdGF0ZSk7XG4gICAgICAgIC8vIGxpc3RlbigpO1xuXG4gICAgfSk7XG4gICAgJGJvYXJkLmZpbmQoJyNyZXN0YXJ0Jykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBhcHBTdGF0ZSA9IHJlc2V0KGFwcFN0YXRlKTtcbiAgICB9KTtcbiAgICAvLyBsaXN0ZW4oKTtcbiAgICAkYm9hcmQub24oJ2NsaWNrJywgJy5zcXVhcmUnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgLy8gbGV0IHggPSBzdGF0ZS51c2VyU2VxdWVuY2UuY29uY2F0KFsoJChldmVudC50YXJnZXQpLmF0dHIoJ2lkJykuc2xpY2UoLTEpKV0pO1xuICAgICAgICAgICAgLy8gdG1wID0gey4uLnN0YXRlLCB1c2VyU2VxdWVuY2U6IHh9O1xuICAgICAgICAgICAgbGV0IG51bSA9ICQoZXZlbnQudGFyZ2V0KS5hdHRyKCdpZCcpLnNsaWNlKC0xKTtcbiAgICAgICAgICAgIHBsYXlTb3VuZChudW0sICRib2FyZCk7XG4gICAgICAgICAgICBhcHBTdGF0ZS51c2VyU2VxdWVuY2UucHVzaChudW0pO1xuICAgICAgICAgICAgdGVzdChhcHBTdGF0ZSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAvLyBhcHBTdGF0ZSA9IGdlbmVyYXRlU2VxdWVuY2UoYXBwU3RhdGUpO1xuICAgIC8vIHBsYXlTZXF1ZW5jZShhcHBTdGF0ZS5zb3VuZFNlcXVlbmNlKTtcblxuXG4gICAgLy8gZXhwb3J0IHtyYW5nZSwgcmFuZG9tLCBnZW5lcmF0ZVJhbmRvbVNlcXVlbmNlfTtcbn0pKCk7XG5cbiIsImltcG9ydCBzZXRHYW1lU3BlZWQgZnJvbSAnLi9nYW1lU3BlZWQnO1xuaW1wb3J0IHBsYXlTb3VuZCAgICBmcm9tICcuL3BsYXlTb3VuZCc7XG5cbi8qKlxuICogR2l2ZW4gdGhlIHN0YXRlIG9iamVjdCB3aWxsIGZpcnN0IGNhbGwgc2V0R2FtZVNwZWVkIHRoZW4gdXNpbmcgdGhlIGZvckVhY2goKVxuICogZnVuY3Rpb24gcGxhY2UgYSBzZXRUaW1lb3V0KCkgY2FsbCBvbiB0aGUgc3RhY2sgYmFzZSBvZmYgdGhhdCBzcGVlZCBhbmQgdGhlXG4gKiBpbmRleCB2YWx1ZSBmcm9tIHRoZSBzb3VuZFNlcXVlbmNlIGFycmF5XG4gKiBAcGFyYW0gIHtvYmplY3R9IHN0YXRlIGluZm8gYWJvdXQgdGhlIGdhbWUgc3RhdGVcbiAqIEBwYXJhbSAge2pRdWVyeSBlbGVtZW50fSB0aGlzIGlzIHRoZSB3cmFwcGVyIGVsZW1lbnQgZm9yIHRoZSBhdWRpbyBmaWxlcyBhbmRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBwYW5lbCBidXR0b25zIHRvIGhpZ2hsaWdodFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwbGF5U2VxdWVuY2Uoc3RhdGUsIHdyYXBwZXIpIHtcbiAgICBzdGF0ZSA9IHNldEdhbWVTcGVlZChzdGF0ZSk7XG4gICAgY29uc29sZS5sb2coc3RhdGUuZ2FtZVNwZWVkKTtcbiAgICBzdGF0ZS5zb3VuZFNlcXVlbmNlLmZvckVhY2goKHNvdW5kSWQsIGluZGV4KSA9PiB7XG4gICAgICAgIGlmKGluZGV4IDwgc3RhdGUucm91bmQpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcGxheVNvdW5kKHNvdW5kSWQsIHdyYXBwZXIpLCAoc3RhdGUuZ2FtZVNwZWVkICogaW5kZXgpKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTsiLCJpbXBvcnQgaGlnaGxpZ2h0IGZyb20gJy4vaGlnaGxpZ2h0JztcblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwbGF5U291bmQoc291bmRJZCwgd3JhcHBlcikge1xuICAgIGNvbnNvbGUubG9nKCdwbGF5aW5nICcgKyBzb3VuZElkKTtcbiAgICAvLyQoYFtkYXRhLXNvdW5kLWlkPVwiJHtzb3VuZElkfVwiXWApLnRyaWdnZXIoJ3BsYXknKTtcbiAgICBoaWdobGlnaHQoc291bmRJZCwgd3JhcHBlcik7XG4gICAgd3JhcHBlci5maW5kKGAjYXVkaW8ke3NvdW5kSWR9YCkudHJpZ2dlcigncGxheScpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJhbmRvbSAobWluLCBtYXgpIHtcblxuICAgIHJldHVybiBNYXRoLm1heChtaW4sIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggKyAxKSkpO1xuXG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmFuZ2Uoc3RhcnQsIGVuZCkge1xuICAgIGxldCBsaXN0ID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZCArIDE7IGkrKykge1xuICAgICAgICAgICAgbGlzdC5wdXNoKGkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGxpc3Q7XG59Il19\n"],"sourceRoot":"/source/"}